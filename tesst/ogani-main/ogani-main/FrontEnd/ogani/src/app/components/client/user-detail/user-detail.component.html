<section class="breadcrumb-section set-bg" [ngStyle]="{backgroundImage:'url(assets/image/1920x1080.jpg'}">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="breadcrumb__text">
                    <h2>UserDetail</h2>
                    <div class="breadcrumb__option">
                        <a routerLink="/" >Home</a>
                        <span>User</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="user mt-5 mb-5">
    <div class="container">
        <div class="row">
            <div class="col-md-3 border-right" *ngIf="user != null">
                <div class="d-flex flex-column align-items-center text-center p-3 py-5"><img class="rounded-circle mt-5"
                        src="assets/image/author.jpg"><span
                        class="font-weight-bold">{{user.username}}</span><span class="text-black-50">{{user.email}}</span><span>
                </span></div>
            </div>
            <div class="col-md-5 border-right">
                <div class="p-3 py-5">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4 class="text-right">Profile Settings</h4>
                    </div>
                    <div class="row mt-2">
                      <div class="col-md-6">
                        <label class="labels" style="color: black">First Name</label>
                        <input type="text" class="form-control" placeholder="First Name" #firstName="ngModel" [(ngModel)]="updateForm.firstname" name="firstname" required pattern="[A-Za-z]+">
                        <div class="error-message" *ngIf="!firstName.valid && (firstName.dirty || firstName.touched)">
                          <div *ngIf="firstName.errors && firstName.errors['required']">First Name is required.</div>
                          <div *ngIf="firstName.errors && firstName.errors['pattern']">Please enter only alphabetical characters.</div>
                        </div>
                      </div>

                      <div class="col-md-6">
                        <label class="labels" style="color: black">Last Name</label>
                        <input type="text" class="form-control" placeholder="Last Name" #lastName="ngModel" [(ngModel)]="updateForm.lastname" name="lastname" required pattern="[A-Za-z]+">
                        <div class="error-message" *ngIf="!lastName.valid && (lastName.dirty || lastName.touched)">
                          <div *ngIf="lastName.errors && lastName.errors['required']">Last Name is required.</div>
                          <div *ngIf="lastName.errors && lastName.errors['pattern']">Please enter only alphabetical characters.</div>
                        </div>
                      </div>

                    </div>
                    <div class="row mt-3">
                      <div class="col-md-12">
                        <label class="labels" style="color: black">PhoneNumber</label>
                        <input type="text" class="form-control" placeholder="Phone Number" #phone="ngModel" [(ngModel)]="updateForm.phone" name="phone" required pattern="[0-9]{1,12}">
                        <div class="error-message" *ngIf="!phone.valid && (phone.dirty || phone.touched)">
                          <div *ngIf="phone.errors && phone.errors['required']">Phone is required.</div>
                          <div *ngIf="phone.errors && phone.errors['pattern']">Please enter a valid phone number (up to 12 digits).</div>
                        </div>
                      </div>
                      <div class="col-md-12">
                        <label class="labels" style="color: black">Address</label>
                        <input type="text" class="form-control" placeholder="Address" #address="ngModel" [(ngModel)]="updateForm.address" name="address" required>
                        <div class="error-message" *ngIf="!address.valid && (address.dirty || address.touched)">
                          <div *ngIf="address.errors && address.errors['required']">Address is required.</div>
                        </div>
                      </div>

                      <div class="col-md-12">
                        <label class="labels" style="color: black">Email</label>
                        <input type="text" class="form-control" placeholder="Email" #email="ngModel" [(ngModel)]="updateForm.email" name="email"  required pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}"/>
                        <div class="error-message" *ngIf="!email.valid && (email.dirty || email.touched)">
                          <div *ngIf="email.errors && email.errors['required']">Email is required.</div>
                          <div *ngIf="email.errors && email.errors['pattern']">Please enter a valid email address.</div>
                        </div>
                      </div>

                    </div>
                    <div class="row mt-3">
                      <div class="col-md-6">
                        <label class="labels" style="color: black">Country</label>
                        <input type="text" class="form-control" placeholder="Country" #country="ngModel" [(ngModel)]="updateForm.country" name="country" required pattern="[A-Za-z]+">
                        <div class="error-message" *ngIf="!country.valid && (country.dirty || country.touched)">
                          <div *ngIf="country.errors && country.errors['required']">Country is required.</div>
                          <div *ngIf="country.errors && country.errors['pattern']">Please enter only alphabetical characters.</div>
                        </div>
                      </div>

                      <div class="col-md-6">
                        <label class="labels" style="color: black">State/Region</label>
                        <input type="text" class="form-control" placeholder="State/Region" #state="ngModel" [(ngModel)]="updateForm.state" name="state" required pattern="[A-Za-z]+">
                        <div class="error-message" *ngIf="!state.valid && (state.dirty || state.touched)">
                          <div *ngIf="state.errors && state.errors['required']">State/Region is required.</div>
                          <div *ngIf="state.errors && state.errors['pattern']">Please enter only alphabetical characters.</div>
                        </div>
                      </div>

                    </div>
                    <div class="mt-5 text-center">
                        <button class="btn btn-primary profile-button" type="button" (click)="updateProfile()">Save Profile</button>
                    </div>
                </div>
            </div>
             <div class="col-md-4">
                <div class="p-3 py-5">
                    <div class="col-md-12">
                        <button pButton pRipple type="button" label="Change Password" class="p-button-primary" (click)="showChangePassword()"></button>
                        <p-dialog header="Change Password" [(visible)]="changePassword" [style]="{width: '30vw'}" [modal]="true" [transitionOptions]="'.3s'">
                            <form action="">
                              <div class="p-field">
                                <label>Old Password: </label>
                                <input class="error-message" type="text" pInputText class="w-full mt-2" [(ngModel)]="changePasswordForm.oldPassword" name="oldPassword" (keyup)="validateOldPassword()">
                                <div *ngIf="!isOldPasswordValid" class="error-message">Mật khẩu cũ phải từ 5 - 15 kí tự.</div>
                              </div>
                                <div class="p-field">
                                    <label >New Password: </label>
                                    <input class="error-message" type="text" pInputText class="w-full mt-2" name="newPassword" [(ngModel)]="changePasswordForm.newPassword" (keyup)="validateNewPassword()">
                                  <div *ngIf="!isNewPasswordValid" class="error-message">Mật khẩu mới phải từ 5 - 15 kí tự.</div>
                                </div>
                                <div class="p-field">
                                    <label>Confirm Password: </label>
                                    <input class="error-message" type="text" pInputText class="w-full mt-2" name="confirmNewPassword" [(ngModel)]="changePasswordForm.confirmNewPassword" (keyup)="validateConfirmPassword()">
                                  <div *ngIf="!isConfirmPasswordValid" class="error-message">Mật khẩu mới phải từ 5 - 15 kí tự.</div>
                                </div>
                                <div class="p-field mt-3">
                                    <button type="submit" pButton (click)="changePasswordFunc()" >Save</button>
                                    <button pButton type="button" class="p-button-danger ml-3" (click)="changePassword=false">Hủy</button>
                                </div>
                            </form>
                        </p-dialog>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- <div class="container rounded bg-white mt-5 mb-5">
    <div class="row">

    </div>
</div> -->
